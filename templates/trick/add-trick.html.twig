{% extends './base.html.twig' %}
{% block title %}Ajouter une figures{% endblock %}
{% block stylesheets %}{{ parent() }}{% endblock %}


 {% block main %}
<!-- Modal -->
<div class = "row d-flex justify-content-center">
 <!-- Background image -->
<div class="bg-image opacity-75">
<div class="bloc-title-home-page">
<h1 class = "h1 d-flex justify-content-center text-center text-primary">Ajouter une figures</h1>
</div>
</div>
<!-- add form-->
 <div class="row container col-md-10 col-md-offset-1 mt-5 mb-4 shadow p-3 mb-5 bg-body rounded">
  <h1>Cr√©er un nouveau trick :</h1>
    {{ form_start(form) }}
    <div class="row">
    <div class="col">{{ form_row(form.name) }}</div>
    <div class="col">{{ form_row(form.category) }}</div>
    </div>
      
     {# the data-index attribute is required for the JavaScript code below #}
    <ul class="tags"
        data-index="{{ form.videos|length > 0 ? form.videos|last.vars.name + 1 : 0 }}"
        data-prototype="{{ form_widget(form.videos.vars.prototype)|e('html_attr') }}"
    ></ul>
    <button type="button" class="add_item_link btn-info rounded" data-collection-holder-class="tags">Ajuter lien de video</button>

     {{ form_rest(form) }}
 </div>
 </div>
 <script>
 const addFormToCollection = (e) => {
  const collectionHolder = document.querySelector('.' + e.currentTarget.dataset.collectionHolderClass);

  const item = document.createElement('li');

  item.innerHTML = collectionHolder
    .dataset
    .prototype
    .replace(
      /__name__/g,
      collectionHolder.dataset.index
    );

  collectionHolder.appendChild(item);

  collectionHolder.dataset.index++;
};

 document
  .querySelectorAll('.add_item_link')
  .forEach(btn => {
      btn.addEventListener("click", addFormToCollection)
  });


 </script>
{% endblock %}